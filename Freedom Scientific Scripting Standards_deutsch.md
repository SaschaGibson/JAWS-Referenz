Freedom Scientific Scripting Standards
Dieses Dokument enthält eine Reihe von Standards, die für alle an Freedom Scientific übermittelten Skripte gelten. Da die Nichteinhaltung dieser Standards zu fehlerhaften Skripten, Leistungseinbußen oder einer eingeschränkten Lokalisierbarkeit in mehrere Sprachen führt, müssen alle übermittelten Skripte die folgenden Standards erfüllen, um für eine Annahme in Betracht zu kommen:
Kritisch: Beeinträchtigen Sie keine derzeit vorhandenen Funktionen oder beabsichtigten Funktionalitäten!
Definieren Sie in der JSH-Datei alle Skriptkonstanten und globalen Variablen. Die einzige Ausnahme bilden Konstanten oder globale Variablen, die streng lokal für die aktuelle Skriptdatei sein müssen und nicht für andere Skriptdateien sichtbar sein sollten.
Definieren Sie in der JSM-Datei alle zu sprechenden Meldungen und verwenden Sie nur diese Meldungsnamen in der JSS-Datei.
Definieren Sie in der JSM-Datei alle Zeichenfolgen, die zum Vergleich oder zur Identifizierung verwendet werden, als Konstanten und verwenden Sie nur diese Zeichenfolgennamen in der JSS-Datei.
Fügen Sie in der JSM-Datei einen Kommentar für Zeichenfolgennamen hinzu, deren Bedeutung nicht offensichtlich ist, und erklären Sie den Übersetzern, wo sie den Text finden, den diese Zeichenfolgennamen im Vergleich darstellen, oder wo sie diese Zeichenfolgennamen zur Identifizierung im Programm verwenden sollen.
Definieren Sie in der JSM-Datei alle Fensternamen und Klassen als Konstanten und verwenden Sie nur diese Konstanten in der JSS-Datei.
Definieren Sie in der JSM-Datei alle Zeichenfolgenvariablen, die aus einem bestimmten formatierten Muster bestehen, so dass jede Variable einen variablen Platzhalter in der formatierten Meldung verwendet. Verwenden Sie dann die Funktionen FormatString oder SayFormattedMessage in der JSS-Datei, um die Meldung zu formatieren.
Dokumentieren Sie in der JSM-Datei alle ersetzbaren Parameter für jede Meldung, die solche Parameter enthält, mit Kommentaren, in denen erklärt wird, welche Informationen in die ersetzbaren Parameter eingehen.
Benennen Sie alle definierten Konstanten und Variablen für Fenster oder Steuerelemente so, dass sie selbsterklärend sind, damit ein Skriptersteller oder Lokalisierer die Position des Fensters oder Steuerelements erkennen kann. Wenn es zu einem Dialogfeld gehört, fügen Sie den Namen des Dialogfelds als Teil des Konstanten- oder Variablennamens hinzu. Wenn es zu einer Seite in einem mehrseitigen Dialogfeld gehört, fügen Sie den Seitennamen als Teil des Konstanten- oder Variablennamens hinzu. Wenn es nicht zu einem Dialogfeld gehört, benennen Sie die Konstante oder Variable so, dass der Skriptersteller oder Lokalisierer feststellen kann, zu welcher Ansicht oder Komponente des Programms das Fenster oder Steuerelement gehört.
Erstellen Sie unterschiedliche Konstanten- oder Variablennamen für Fenster oder Steuerelemente, die denselben Namen haben, aber in mehr als einem Bereich oder in nicht miteinander verbundenen Bereichen des Programms vorkommen. Auf diese Weise haben Fenster oder Steuerelemente jeweils ihre eigenen Konstanten- oder Variablennamen, die sich speziell auf den Ort beziehen, an dem sie verwendet werden. Verwenden Sie denselben Konstanten- oder Variablennamen nicht erneut, um auf verschiedene Fenster oder Steuerelemente zu verweisen.
Dokumentieren Sie alle Ihre Funktionen und Skripte in der JSD-Dokumentationsdatei. Achten Sie darauf, die Zusammenfassung, die Beschreibung und alle Parameter oder Rückgabetypen für jede Funktion und jedes Skript gut zu dokumentieren. Achten Sie insbesondere bei Skripten darauf, dass der Text in den Feldern „Synopsis” und „Beschreibung” für die Sprachausgabe und die Anzeige in Braille durch die JAWS-Tastaturhilfe geeignet ist.
Fügen Sie den Skripten keine Leertaste oder alphanumerischen Tasten hinzu. Wenn für diese Tasten ein spezielles Verhalten erforderlich ist, verwenden Sie die Funktion „KeyPressedEvent”, anstatt Skripte an die Tasten anzuhängen.
Verwenden Sie die Funktion „SayString“ nur als Debugging-Tool während der Skripterstellung und verwenden Sie diese Funktion nicht, um etwas im fertigen Produkt auszusprechen.
Verwenden Sie keine Klammern wie „{“ und „}“, um Tastenanschläge zu simulieren. Verwenden Sie die Funktionen „TypeKey“ oder „TypeCurrentScriptKey“, wenn Sie einen Tastenanschlag an die Anwendung senden.
Strukturieren Sie Ihren Code so, dass er auf die schnellstmögliche Weise getestet und ausgeführt wird. Achten Sie beim Hinzufügen von Code zu häufig ausgeführten Ereignissen besonders darauf, keine unnötigen Verzögerungen zu verursachen.
Verwenden Sie nach Möglichkeit Fenster- oder Objektinformationen anstelle von Bildschirminformationen.
Verwenden Sie den JAWS- oder unsichtbaren Cursor nur dann, um Informationen abzurufen, wenn keine andere Methode funktioniert. Verwenden Sie in diesem Fall immer den unsichtbaren Cursor, es sei denn, der JAWS-Cursor ist erforderlich, um die Aktion auszuführen, da der unsichtbare Cursor dies nicht kann. Wenn die Verwendung des JAWS- oder unsichtbaren Cursors erforderlich ist, speichern Sie die Position des PC-Cursors, bevor Sie den JAWS- oder unsichtbaren Cursor aktivieren oder bevor Sie eine Funktion aufrufen, die einen dieser Cursor aktiviert. Achten Sie dann darauf, den PC-Cursor an der gespeicherten Position wieder zu aktivieren, sobald die gewünschte Aktion mit dem JAWS- oder unsichtbaren Cursor abgeschlossen ist.
 Hinweis: Ab JAWS 2020 können Sie stattdessen auch die UIA-Scan-Cursor verwenden. Informationen zu den für JAWS 2020 und höher verfügbaren Funktionen für diese Cursor finden Sie hier. Im Allgemeinen gelten für die Verwendung dieser Cursor dieselben Regeln wie für die herkömmlichen JAWS- und unsichtbaren Cursor.
Es gibt mehrere Methoden, um mit diesen Cursorn zu arbeiten.
Verwenden Sie niemals die Funktionen „SpeechOff“ und „SpeechOn“, um die Sprachausgabe vorübergehend zu unterdrücken. Wenn Sie die Sprachausgabe für bestimmte Zwecke unterdrücken müssen, verwenden Sie eine spezielle globale Variable für die jeweilige Unterdrückung.
Beachten Sie beim Definieren des Verhaltens in einem Skript oder einer Funktion immer den aktiven Cursor. Beeinträchtigen Sie nicht die Funktionalität des JAWS-, Invisible- oder UIA-Scan-Cursors.
Berücksichtigen Sie beim Entwerfen Ihres Codes immer, ob das gewünschte JAWS-Verhalten den Status des Benutzerpuffers oder den Menüstatus als Sonder- oder Ausnahmefälle berücksichtigen sollte.
Berücksichtigen Sie beim Entwerfen Ihres Codes immer die Sprachausgabekonfiguration des Benutzers und beachten Sie immer die Sprach- und Soundschemafunktionalität für Steuerelemente und Texteigenschaften.
Halten Sie alle globalen Variablen auf dem neuesten Stand. Wenn Sie eine Funktion überschreiben, die globale Variablen enthält, stellen Sie sicher, dass Sie die erforderlichen Variablen aktualisieren, bevor Sie aus dieser Funktion zurückkehren.
Überschreiben Sie für den spezifischen Fall, wenn Sie das Verhalten einer vorhandenen Funktion oder eines Skripts überschreiben. Rufen Sie dann für alle anderen Fälle die Standardfunktion oder das Standardskript auf. Vermeiden Sie nach Möglichkeit, die gesamte Standardfunktion oder das gesamte Standardskript in Ihre Skriptdatei zu kopieren und dann Ausnahmefälle hinzuzufügen. Dadurch wird Ihr Code veraltet, wenn sich der Standardcode ändert. Verwenden Sie für Ihre Funktion oder Ihr Skript immer denselben Namen wie für die Standardfunktion oder das Standardskript.
Verwenden Sie gegebenenfalls ereignisgesteuerten Code. Stellen Sie beispielsweise in Listen oder Baumstrukturen, in denen eine Navigation anhand des ersten Buchstabens möglich ist, sicher, dass jeder Code zur Ausgabe von Sprache während der Navigation geeigneten ereignisgesteuerten Code verwendet, z. B. die Funktion „SayHighlightedText“ (aufgerufen durch die Funktion „NewTextEvent“), die Funktion „ActiveItemChangedEvent“ oder „ValueChangedEvent“ anstelle von tastenbasiertem Code wie den Skripten „SayNextLine“ oder „SayPriorLine“.
Wenn Sie Ihren Code zum Überschreiben der nativen Tastenfunktion der Anwendung entwerfen, prüfen Sie, ob die Tastenfunktion an die Anwendung weitergeleitet werden soll, wenn die speziellen Testbedingungen in Ihrem Code nicht erfüllt sind. Definieren Sie in der JSM-Datei den weiterzuleitenden Tastennamen als Konstante mit einem aussagekräftigen Namen, der die Funktion der Taste erklärt. Beispiel: Verwenden Sie nicht ksAltI, sondern ksIgnoreButton, da der Hotkey für die Schaltfläche je nach Sprache variieren kann.
Wenn Sie die Funktionalität einer bereits in der Standard-JKM-Datei definierten Tastenkombination überschreiben, nehmen Sie keine Einträge in der anwendungsspezifischen JKM-Datei für die Tastenkombination vor.
Fügen Sie in die JAWS-Hotkey-Hilfe alle neuen, nicht anwendungsspezifischen und nicht standardmäßigen Windows-Tastaturbelegungen für alle Tasten ein, die der JKM-Datei hinzugefügt wurden.
Stellen Sie sicher, dass die Funktion „ScriptFileName“ relevante Informationen für die aktuelle Anwendung und Skriptdatei ausgibt.
Geben Sie keine speziellen Meldungen für Skripte aus, die an native Windows-Tastenanschläge angehängt sind.
Stellen Sie sicher, dass die entsprechenden Informationen (Informationen zum Anwendungsfenster, zum tatsächlichen Fenster und zum Fokusfenster) bei einer Fokusänderung gesprochen werden. Vermeiden Sie doppelte Sprachausgaben und stellen Sie sicher, dass nur relevante Änderungen gesprochen werden.
Stellen Sie sicher, dass die Funktion „SayWindowPromptAndText“ dieselben Informationen über das Fokusfenster ansagt, die auch angesagt wurden, als das Fenster den Fokus erhielt. Aktivieren Sie außerdem vorübergehend den Trainingsmodus für die Funktion „SayWindowPromptAndText“, wenn das Fokusfenster angesagt wird, damit die Trainingsinformationen entsprechend angesagt werden.
Wenn Sie Hilfemeldungen für die Anzeige im virtuellen Viewer entwerfen, platzieren Sie oben im virtuellen Viewer eine Meldung, die dem Benutzer die aktuelle Position mitteilt. Wenn Sie eine Liste von Befehlen für eine Tastenebene anzeigen, zeigen Sie an, welche Taste gedrückt werden muss, um die Ebene zu starten. Wenn Sie eine Liste von Befehlen und den zugehörigen Tastenanschlägen anzeigen, machen Sie jeden Befehl in der Liste zu einem Link. Beschreiben Sie dann für jeden Befehls-Link zuerst den Befehl und zeigen Sie dann den Tastenanschlag an. Zeigen Sie alle weiteren allgemeinen Informationen in Form von Absätzen ohne Links an. Beenden Sie jeden virtuellen Hilfebildschirm immer mit einer Meldung, die dem Benutzer mitteilt, wie er den virtuellen Viewer schließen kann. Diese Meldung muss kein Link sein.
Wenn Sie Skripte für spezielle Verhaltensweisen erstellen, erstellen Sie Skripte sowohl für Sprach- als auch für Braille-Verhaltensweisen.
Stellen Sie bei Steuerelementen, bei denen die Position in der Gruppeninformation verfügbar ist, sicher, dass die Position in der Gruppe angesagt wird, wenn der Fokus auf das Steuerelement verschoben wird. Stellen Sie außerdem sicher, dass Ihre Sonderbedingungen dazu führen, dass die Funktionen „SayWindowPromptAndText” und „SayLine” die Position in der Gruppe ansagen. Stellen Sie jedoch auch sicher, dass JAWS die Position in der Gruppe nicht ansagt, wenn zwischen den Elementen in der Gruppe gewechselt wird. JAWS sollte die Position in der Gruppeninformation für Steuerelemente wie Listen, Kombinationsfelder und Optionsfelder ansagen. Bei Baumansichten sollte JAWS neben der Position in der Gruppeninformation auch Informationen zu Ebene und Status ansagen. Stellen Sie sicher, dass JAWS die Position, die Ebene und Änderungen des Status „Öffnen/Schließen” von Baumansichtselementen beim Navigieren ansagt und in Braille anzeigt.
Zusätzliche Richtlinien zum Schreiben akzeptabler Skriptcodes
Im Folgenden finden Sie einige zusätzliche Richtlinien zum Schreiben und Formatieren von Code, damit dieser möglichst einfach gewartet werden kann. Die Entwickler von Freedom Scientific danken Ihnen vielmals, dass Sie diese Richtlinien beim Schreiben Ihres Codes befolgen.
 
Schreiben Sie selbstdokumentierenden Code, indem Sie aussagekräftige Namen für Skripte, Funktionen, Variablen und Konstanten verwenden. Selbstdokumentierender Code ist viel einfacher zu verstehen, zu warten und zu debuggen.
Modularisieren Sie den Code, damit Ihre Skripte oder Funktionen nicht zu groß und unhandlich werden. Es ist viel zeitsparender, modulare, kleinere Skripte und Funktionen zu warten und zu debuggen, als einen großen Abschnitt des Codes Zeile für Zeile durchzugehen.
Schreiben Sie Skript-, Funktions-, Variablen- und Konstantenamen groß, damit JAWS sie in einer erkennbaren Weise ausspricht. Dies erreichen Sie am besten, indem Sie entweder die einzelnen „Wörter” des Namens groß schreiben oder die einzelnen „Wörter” des Namens durch Unterstriche („_”) voneinander trennen.
Da der Compiler keine verschachtelten Kommentare im C-Stil zulässt, verwenden Sie keine Kommentare im C-Stil („/*“ „*/“) zum Kommentieren von Code. Verwenden Sie stattdessen Semikolons („;“). Dadurch wird es einfacher, Kommentare im C-Stil als vorübergehende Möglichkeit zum Auskommentieren von Code zu verwenden, da der Skripter nicht nach vorhandenen Kommentarmarkierungen im C-Stil innerhalb des Codes suchen muss.
Wenn Sie lokale Variablen definieren, setzen Sie „var“ in einer eigenen Zeile am linken Rand und setzen Sie dann jede nachfolgende lokale Variable in einer eigenen Zeile, die um eine Tabulatorstelle eingerückt ist. Dadurch lässt sich die Variablenliste schnell lesen und leicht ändern, wenn Elemente hinzugefügt oder gelöscht werden müssen.
Setzen Sie alle Level-0-Anweisungen am linken Rand und rücken Sie jede Ebene einmal mit der Tabulatortaste (nicht mit Leerzeichen) ein. Richten Sie die übereinstimmenden Komponenten von If-ElIf-Else-EndIf-Anweisungen und von While-EndWhile-Anweisungen aus. Wenn eine If- oder While-Anweisung zusammengesetzte Bedingungen enthält, setzen Sie jede Bedingung in eine eigene Zeile. Richten Sie den Operator für jede Zeile des zusammengesetzten Tests mit der If-, ElIf-, Else- und Endif- oder der While-Endwhile-Anweisung aus. Die Einhaltung dieser Konvention erleichtert das Auffinden von Codeblöcken, die in Braille angezeigt werden, sowie die Verwendung der Einrückungsankündigungsfunktionen von JAWS.
 Kommentieren Sie Ihren Code mit Bedacht. Wenn der Code selbst selbsterklärend ist, sind Kommentare nicht erforderlich. Wenn Sie jedoch auf eine bestimmte Art und Weise programmieren oder eine Technik verwenden, deren Zweck beim bloßen Lesen des Codes nicht sofort ersichtlich ist, sind Kommentare unerlässlich. Denken Sie daran, dass Ihr Code und Ihre Kommentare von jedem gelesen werden können. Halten Sie die Kommentare daher professionell und für alle Leser angemessen.
Namenskonventionen für Variablen und Konstanten
Verwenden Sie eine standardisierte und einheitliche Methode zur Benennung von Variablen und Konstanten. Der Skriptcode von Freedom Scientific hält sich weitgehend an die folgenden Namenskonventionen für die Notation von Variablen- und Konstanten-Typen:
 
Setzen Sie vor Variablennamen für Handles ein „h“, vor Variablennamen für Zeichenfolgen ein „s“, vor Variablennamen für Ganzzahlen ein „i“ und vor Variablennamen für Objekte ein „o“.
Setzen Sie vor globalen Variablennamen ein „g“. Ein globaler Variablenname für eine Ganzzahl wird beispielsweise mit „gi“ gekennzeichnet.
Bei der Benennung von Konstanten setzen Sie vor Fensternamen ein „wn“ und vor Fensterklassen ein „wc“.
Bei der Definition von zu sprechenden Meldungen wird dem Namen „msg“ vorangestellt; für konstante Zeichenfolgen, die für den Vergleich auf dem Bildschirm definiert sind, wird „sc“ als Präfix verwendet.
Halten Sie sich konsequent an Ihre Konvention und wählen Sie eine aussagekräftige Konvention, wenn noch keine geeignete vorhanden ist. Durch die Verwendung dieser Art der Notation lässt sich sofort erkennen, welcher Variablentyp verwendet wird, ohne dass die Deklarationsliste in JSH- oder JSM-Dateien erneut überprüft werden muss.